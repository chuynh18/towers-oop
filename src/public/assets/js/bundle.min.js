(function(){function e(k,f,g){function c(b,h){if(!f[b]){if(!k[b]){var d="function"==typeof require&&require;if(!h&&d)return d(b,!0);if(a)return a(b,!0);d=Error("Cannot find module '"+b+"'");throw d.code="MODULE_NOT_FOUND",d;}d=f[b]={exports:{}};k[b][0].call(d.exports,function(a){return c(k[b][1][a]||a)},d,d.exports,e,k,f,g)}return f[b].exports}for(var a="function"==typeof require&&require,b=0;b<g.length;b++)c(g[b]);return c}return e})()({1:[function(e,k,f){f.__esModule=!0;e=function(){function e(c){this.gameBoard=
   this.generateBoard(c);this.clues=this.generateClues(this.gameBoard)}e.prototype.getBoard=function(){return this.gameBoard};e.prototype.getClues=function(){return this.clues};e.prototype.getAttempts=function(){return this.boardGenerationAttempts};e.prototype.generateBoard=function(c){var a=0;do{var b=this.attemptToGenerateBoard(c);a++}while("boolean"===typeof b);this.boardGenerationAttempts=a;return b};e.prototype.attemptToGenerateBoard=function(c){for(var a=[],b=0;b<c;b++)a.push(Array(c));for(b=0;b<
   c;b++){for(var d=[],h=0;h<c;h++)d.push(h);var l=function(c){var h=e.getEmptySpots(a[c]),l=d.filter(function(b){return-1<h.indexOf(b)});if(0===l.length)return{value:!1};l=l[Math.floor(Math.random()*l.length)];a[c][l]=b+1;d.splice(d.indexOf(l),1)},e=this;for(h=0;h<c;h++){var f=l(h);if("object"===typeof f)return f.value}}return a};e.prototype.getEmptySpots=function(c){for(var a=[],b=0;b<c.length;b++)c[b]||a.push(b);return a};e.prototype.generateClues=function(c){for(var a=[],b=0;b<c.length;b++){for(var d=
   [],h=0;h<c.length;h++)d.push(c[h][b]);a.push(this.computeVisibleTowers(d))}for(b=0;b<c.length;b++){d=[];for(h=c.length-1;0<=h;h--)d.push(c[b][h]);a.push(this.computeVisibleTowers(d))}for(b=c.length-1;0<=b;b--){d=[];for(h=c.length-1;0<=h;h--)d.push(c[h][b]);a.push(this.computeVisibleTowers(d))}for(b=c.length-1;0<=b;b--)a.push(this.computeVisibleTowers(c[b]));return a};e.prototype.computeVisibleTowers=function(c){c=c.filter(function(b){return"number"===typeof b});for(var a=1,b=c[0],d=1;d<c.length;d++)c[d]>
   b&&(b=c[d],a++);return a};return e}();f.Board=e},{}],2:[function(e,k,f){f.__esModule=!0;var g=e("./utility");e=function(){function c(a,b,d){"undefined"===typeof d?this.numCellsX=this.numCellsY=b:(this.numCellsX=b,this.numCellsY=d);this.canvas=a;this.draw=a.getContext("2d")}c.prototype.resize=function(a,b){"undefined"===typeof b?(this.canvas.width=this.canvas.height=a,this.cellWidth=a/this.numCellsX,this.cellHeight=a/this.numCellsY):(this.canvas.width=a,this.canvas.height=b,this.cellWidth=a/this.numCellsX,
   this.cellHeight=b/this.numCellsY)};c.prototype.drawGrid=function(a){"undefined"===typeof a&&(a=0);for(var b=a;b<=this.numCellsY-a;b++){var d=this.cellHeight*b;this.draw.beginPath();this.draw.moveTo(a*this.cellWidth,d);this.draw.lineTo(this.canvas.width-a*this.cellWidth,d);this.draw.stroke()}for(b=a;b<=this.numCellsX-a;b++)d=this.cellWidth*b,this.draw.beginPath(),this.draw.moveTo(d,a*this.cellHeight),this.draw.lineTo(d,this.canvas.height-a*this.cellHeight),this.draw.stroke()};c.prototype.clearCanvas=
   function(){this.draw.clearRect(0,0,this.canvas.width,this.canvas.height)};c.prototype.getBoardInfo=function(){return{numCellsX:this.numCellsX,numCellsY:this.numCellsY,cellWidth:this.cellWidth,cellHeight:this.cellHeight,canvasWidth:this.canvas.width,canvasHeight:this.canvas.height}};c.prototype.calculateClickCoordinates=function(a){var b=this.canvas.getBoundingClientRect(),d=this.getBoardInfo();return g.convertPixelsToCellCoords(a.clientX-b.left,a.clientY-b.top,d.cellWidth,d.cellHeight)};c.prototype.highlightCell=
   function(a){var b=g.convertCellCoordsToPixels(a.x,a.y,this.cellWidth,this.cellHeight);this.draw.beginPath();this.draw.fillStyle=a.color;this.draw.rect(b[0],b[1],this.cellWidth,this.cellHeight);this.draw.fill()};c.prototype.drawText=function(a,b,d){if(b>this.numCellsX-1||d>this.numCellsY-1)console.log("Warning:  You are attempting to place text out of bounds."),console.log("Your input: ("+b+", "+d+")."),console.log("Maximum value: ("+(this.numCellsX-1)+", "+(this.numCellsY-1)+").");else{var c=this.cellHeight>
   this.cellWidth?this.cellWidth:this.cellHeight;c=a.fontSize?a.fontSize:c/2;d=g.convertCellCoordsToPixels(b,d,this.cellWidth,this.cellHeight);b=d[0]+this.cellWidth/2.7;d=d[1]+this.cellHeight/1.5;a.xPixelOffset&&(b+=a.xPixelOffset,a.xPixelOffset>this.cellWidth/2&&console.log("Warning:  Your x-pixel offset may cause text to appear in a neighboring cell."));a.yPixelOffset&&(d+=a.yPixelOffset,a.yPixelOffset>this.cellHeight/2&&console.log("Warning:  Your y-pixel offset may cause text to appear in a neighboring cell."));
   this.draw.font=c+"px "+(a.font?a.font:"Arial");this.draw.fillStyle=a.color?a.color:"black";this.draw.measureText(a.text).width>this.cellWidth&&console.log("Warning:  The width of the text you are drawing exceeds the cell width.");c>this.cellHeight&&console.log("Warning:  The font size you have chosen is taller than the cell height.");this.draw.fillText(a.text,b,d)}};c.prototype.render=function(a){var b=this;this.clearCanvas();Array.isArray(a.canvasSize)?a.canvasSize[0]===this.canvas.width&&a.canvasSize[1]===
   this.canvas.height||this.resize(a.canvasSize[0],a.canvasSize[1]):a.canvasSize===this.canvas.width&&a.canvasSize===this.canvas.height||this.resize(a.canvasSize);this.drawGrid(a.padding);Array.isArray(a.highlight)?a.highlight.forEach(function(a){b.highlightCell(a)}):"object"===typeof a.highlight&&this.highlightCell(a.highlight);if(a.board)if(a.board.length!==this.numCellsY)console.log("Warning:  board size mismatch in Y dimension."),console.log("Expected "+this.numCellsY+" height, but got "+a.board.length+
   " instead.");else{for(var d=0;d<a.board.length;d++)if(a.board[d].length!==this.numCellsX){console.log("Warning:  board size mismatch in X dimension.");console.log("Expected "+this.numCellsX+" height, but got "+a.board[d].length+" instead.");return}for(d=0;d<a.board.length;d++)for(var c=0;c<a.board[d].length;c++){var l=a.board[d][c];"undefined"!==typeof l&&this.drawText(l,c,d)}}};return c}();f.CanvasRenderer=e},{"./utility":7}],3:[function(e,k,f){f.__esModule=!0;var g=e("./utility");e=function(){function c(a,
   b,d,c,l,e){this.eventListenersAdded=!1;this.model=a;this.view=b;this.canvas=d;this.keypadView=c;this.keypad=l;this.canvasSize=g.calculateDesiredCanvasSize();this.keypadCanvas=e;this.numKeypadCells=this.keypadView.getBoardInfo().numCellsX;this.attachEventHandlers()}c.prototype.attachEventHandlers=function(){var a=this;this.eventListenersAdded||(this.canvas.addEventListener("click",function(b){b=a.view.calculateClickCoordinates(b);a.model.activateCell(b);a.model.showBoard(a.canvasSize);b=a.model.getValueAtActiveCell();
   var d;"undefined"===typeof b?d=0:0<b&&(d=b);a.keypad.showKeypad([a.canvasSize,a.canvasSize/a.numKeypadCells],d)}),this.keypadCanvas.addEventListener("click",function(b){b=a.keypadView.calculateClickCoordinates(b)[0];if(-1!==a.model.getValueAtActiveCell()){0===b?(a.model.deleteGuess(),a.model.showBoard(a.canvasSize)):a.model.insertGuess(b)&&a.model.showBoard(a.canvasSize);b=a.model.getValueAtActiveCell();var d=void 0;"undefined"===typeof b?d=0:0<b&&(d=b);a.keypad.showKeypad([a.canvasSize,a.canvasSize/
   a.numKeypadCells],d)}}),window.onkeyup=function(b){if(48<=b.keyCode&&57>=b.keyCode||96<=b.keyCode&&105>=b.keyCode)a.model.insertGuess(Number(b.key))&&(a.model.activateCell([-1,-1]),a.model.showBoard(a.canvasSize),a.keypad.showKeypad([a.canvasSize,a.canvasSize/a.numKeypadCells]));else if(8===b.keyCode||46===b.keyCode)a.model.deleteGuess(),a.model.activateCell([-1,-1]),a.model.showBoard(a.canvasSize),a.keypad.showKeypad([a.canvasSize,a.canvasSize/a.numKeypadCells])},window.onresize=function(){a.canvasSize=
   g.calculateDesiredCanvasSize();var b=a.model.getValueAtActiveCell(),d;"undefined"===typeof b?d=0:0<b&&(d=b);a.model.showBoard(a.canvasSize);a.keypad.showKeypad([a.canvasSize,a.canvasSize/a.numKeypadCells],d)},this.eventListenersAdded=!0)};return c}();f.Controller=e},{"./utility":7}],4:[function(e,k,f){f.__esModule=!0;k=document.getElementById("tower");f=document.getElementById("keypad");var g=e("./model"),c=e("./canvas-renderer"),a=e("./controller"),b=e("./keypad");e=new c.CanvasRenderer(k,7);g=new g.Game(e,
   5);c=new c.CanvasRenderer(f,6,1);b=new b.Keypad(c);new a.Controller(g,e,k,c,b,f)},{"./canvas-renderer":2,"./controller":3,"./keypad":5,"./model":6}],5:[function(e,k,f){f.__esModule=!0;var g=e("./utility");e=function(){function c(a){this.values=[];this.canvasRenderer=a;a=this.canvasRenderer.getBoardInfo().numCellsX;for(var b=0;b<a-1;b++)this.values[b+1]=b+1;b=g.calculateDesiredCanvasSize();this.showKeypad([b,b/a])}c.prototype.buildDrawTextConfig=function(a){for(var b=[],d=0;d<this.values.length;d++)b.push({text:"undefined"===
   typeof this.values[d]?"":String(this.values[d]),color:"gray"});"number"===typeof a&&(b[a].color="Navy");return b};c.prototype.showKeypad=function(a,b){var d={padding:0,canvasSize:a,board:[this.buildDrawTextConfig(b)]};"number"===typeof b&&(d.highlight={x:b,y:0,color:"LightGray"});this.canvasRenderer.render(d)};return c}();f.Keypad=e},{"./utility":7}],6:[function(e,k,f){f.__esModule=!0;var g=e("./Board"),c=e("./utility");e=function(){function a(b,a){this.activeCell=[-1,-1];this.cluesAndGuesses=[];
   this.drawTextConfigBoard=[];this.view=b;this.board=new g.Board(a);this.buildArray(a+2,this.cluesAndGuesses);this.buildArray(a+2,this.drawTextConfigBoard);this.populateGuessArrayWithClues();this.showBoard(c.calculateDesiredCanvasSize())}a.prototype.getValueAtActiveCell=function(){return-1<this.activeCell[0]&&-1<this.activeCell[1]?this.cluesAndGuesses[this.activeCell[1]][this.activeCell[0]]:-1};a.prototype.activateCell=function(b){c.arrayCompare(this.activeCell,b)?(this.activeCell[0]=-1,this.activeCell[1]=
   -1):0<b[0]&&b[0]<this.cluesAndGuesses.length-1&&0<b[1]&&b[1]<this.cluesAndGuesses.length-1?(this.activeCell[0]=b[0],this.activeCell[1]=b[1]):-1===b[0]&&-1===b[1]&&(this.activeCell[0]=-1,this.activeCell[1]=-1)};a.prototype.buildArray=function(b,a){for(var d=a.length=0;d<b;d++)a[d]=Array(b)};a.prototype.populateGuessArrayWithClues=function(){for(var b=this.board.getClues(),a=0;a<b.length/4;a++)this.cluesAndGuesses[0][a+1]=b[a],this.cluesAndGuesses[a+1][this.cluesAndGuesses.length-1]=b[b.length/4+a],
   this.cluesAndGuesses[this.cluesAndGuesses.length-1][this.cluesAndGuesses.length-a-2]=b[b.length/2+a],this.cluesAndGuesses[this.cluesAndGuesses.length-a-2][0]=b[3*b.length/4+a]};a.prototype.checkDuplicateNumber=function(b,a){var d=this.cluesAndGuesses[a][b];if(!d)return!1;for(var c=1;c<this.cluesAndGuesses.length-1;c++)if(c!==a&&d===this.cluesAndGuesses[c][b]||c!==b&&d===this.cluesAndGuesses[a][c])return!0;return!1};a.prototype.checkClueViolationTop=function(b){if(0<b&&b<this.cluesAndGuesses.length-
   1){for(var a=[],c=!0,e=1;e<this.cluesAndGuesses.length-1;e++){var f=this.cluesAndGuesses[e][b];"undefined"===typeof f&&(c=!1);a.push(f)}a=this.board.computeVisibleTowers(a);return c?{violation:this.cluesAndGuesses[0][b]!==a,lineFilled:!0}:{violation:this.cluesAndGuesses[0][b]<a,lineFilled:!1}}throw new RangeError("X value "+b+" is not valid.");};a.prototype.checkClueViolationRight=function(b){if(0<b&&b<this.cluesAndGuesses.length-1){for(var a=[],c=!0,e=this.cluesAndGuesses.length-2;0<e;e--){var f=
   this.cluesAndGuesses[b][e];"undefined"===typeof f&&(c=!1);a.push(f)}a=this.board.computeVisibleTowers(a);return c?{violation:this.cluesAndGuesses[b][this.cluesAndGuesses.length-1]!==a,lineFilled:!0}:{violation:this.cluesAndGuesses[b][this.cluesAndGuesses.length-1]<a,lineFilled:!1}}throw new RangeError("Y value "+b+" is not valid.");};a.prototype.checkClueViolationBottom=function(b){if(0<b&&b<this.cluesAndGuesses.length-1){for(var a=[],c=!0,e=this.cluesAndGuesses.length-2;0<e;e--){var f=this.cluesAndGuesses[e][b];
   "undefined"===typeof f&&(c=!1);a.push(f)}a=this.board.computeVisibleTowers(a);return c?{violation:this.cluesAndGuesses[this.cluesAndGuesses.length-1][b]!==a,lineFilled:!0}:{violation:this.cluesAndGuesses[this.cluesAndGuesses.length-1][b]<a,lineFilled:!1}}throw new RangeError("X value "+b+" is not valid.");};a.prototype.checkClueViolationLeft=function(b){if(0<b&&b<this.cluesAndGuesses.length-1){for(var a=this.cluesAndGuesses[b].slice(1,this.cluesAndGuesses.length-1),c=!0,e=0;e<a.length;e++)"undefined"===
   typeof a[e]&&(c=!1);a=this.board.computeVisibleTowers(a);return c?{violation:this.cluesAndGuesses[b][0]!==a,lineFilled:!0}:{violation:this.cluesAndGuesses[b][0]<a,lineFilled:!1}}throw new RangeError("Y value "+b+" is not valid.");};a.prototype.updateDrawTextArray=function(){for(var b=0;b<this.cluesAndGuesses.length;b++)for(var a=0;a<this.cluesAndGuesses[b].length;a++){var c=this.cluesAndGuesses[b][a],e=this.drawTextConfigBoard[b][a];"undefined"!==typeof c?"undefined"===typeof e?this.drawTextConfigBoard[b][a]=
   {text:String(c)}:e.text=String(c):"undefined"===typeof e?this.drawTextConfigBoard[b][a]={text:""}:e.text=""}};a.prototype.validateBoard=function(){for(var a=!0,d=1;d<this.cluesAndGuesses.length-1;d++)for(var c=1;c<this.cluesAndGuesses[d].length-1;c++){var e=this.drawTextConfigBoard[d][c];this.checkDuplicateNumber(c,d)?(e.color="red",a=!1):e.color="black"}for(d=1;d<this.cluesAndGuesses.length-1;d++){c=this.checkClueViolationTop(d);e=this.checkClueViolationRight(d);var f=this.checkClueViolationBottom(d),
   g=this.checkClueViolationLeft(d);c.violation&&c.lineFilled?(a=!1,this.drawTextConfigBoard[0][d].color="red"):this.drawTextConfigBoard[0][d].color=c.violation&&!c.lineFilled?"orange":"black";e.violation&&e.lineFilled?(a=!1,this.drawTextConfigBoard[d][this.drawTextConfigBoard.length-1].color="red"):this.drawTextConfigBoard[d][this.drawTextConfigBoard.length-1].color=e.violation&&!e.lineFilled?"orange":"black";f.violation&&f.lineFilled?(a=!1,this.drawTextConfigBoard[this.drawTextConfigBoard.length-1][d].color=
   "red"):this.drawTextConfigBoard[this.drawTextConfigBoard.length-1][d].color=f.violation&&!f.lineFilled?"orange":"black";g.violation&&g.lineFilled?(a=!1,this.drawTextConfigBoard[d][0].color="red"):this.drawTextConfigBoard[d][0].color=g.violation&&!g.lineFilled?"orange":"black"}return a};a.prototype.userHasFilledOutBoard=function(){for(var a=1;a<this.cluesAndGuesses.length-1;a++)for(var d=1;d<this.cluesAndGuesses[a].length-1;d++)if("undefined"===typeof this.cluesAndGuesses[a][d])return!1;return!0};
   a.prototype.deleteGuess=function(){0<this.activeCell[0]&&this.activeCell[0]<this.cluesAndGuesses.length-1&&0<this.activeCell[1]&&this.activeCell[1]<this.cluesAndGuesses.length-1&&delete this.cluesAndGuesses[this.activeCell[1]][this.activeCell[0]]};a.prototype.insertGuess=function(a){a=Number(a);if(0>=a||a>this.cluesAndGuesses.length-2)return console.log("Guess value "+a+" is not valid."),!1;if(0<this.activeCell[0]&&this.activeCell[0]<this.cluesAndGuesses.length-1&&0<this.activeCell[1]&&this.activeCell[1]<
   this.cluesAndGuesses.length-1)return this.cluesAndGuesses[this.activeCell[1]][this.activeCell[0]]=Number(a),!0;console.log("Invalid coordinates:  "+this.activeCell);return!1};a.prototype.victory=function(){console.log("placeholder victory yay")};a.prototype.showBoard=function(a){this.updateDrawTextArray();var b=this.validateBoard(),c=this.userHasFilledOutBoard();console.log("valid: "+b+", filled board: "+c);b&&c&&this.victory();a={padding:1,canvasSize:a,board:this.drawTextConfigBoard};-1<this.activeCell[0]&&
   -1<this.activeCell[1]&&(a.highlight={x:this.activeCell[0],y:this.activeCell[1],color:"LightGray"});this.view.render(a)};return a}();f.Game=e},{"./Board":1,"./utility":7}],7:[function(e,k,f){function g(c,a){if(c.length!==a.length)return!1;for(var b=0;b<c.length;b++)if(Array.isArray(c[b])&&Array.isArray(a[b])){var d=g(c[b],a[b]);if(!d)return d}else if(c[b]!==a[b])return!1;return!0}f.__esModule=!0;f.convertCellCoordsToPixels=function(c,a,b,d){return[b*c,d*a]};f.convertPixelsToCellCoords=function(c,a,
   b,d){return[Math.floor(c/b),Math.floor(a/d)]};f.arrayCompare=g;f.calculateDesiredCanvasSize=function(){var c=document.getElementsByTagName("body")[0].clientWidth,a=.8*window.innerHeight-20;return c>a?a:c}},{}]},{},[4]);