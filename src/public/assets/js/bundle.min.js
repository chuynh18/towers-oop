(function(){function g(h,f,e){function c(b,k){if(!f[b]){if(!h[b]){var d="function"==typeof require&&require;if(!k&&d)return d(b,!0);if(a)return a(b,!0);d=Error("Cannot find module '"+b+"'");throw d.code="MODULE_NOT_FOUND",d;}d=f[b]={exports:{}};h[b][0].call(d.exports,function(a){return c(h[b][1][a]||a)},d,d.exports,g,h,f,e)}return f[b].exports}for(var a="function"==typeof require&&require,b=0;b<e.length;b++)c(e[b]);return c}return g})()({1:[function(g,h,f){f.__esModule=!0;g=function(){function e(c){this.gameBoard=
this.generateBoard(c);this.clues=this.generateClues(this.gameBoard)}e.prototype.getBoard=function(){return this.gameBoard};e.prototype.getClues=function(){return this.clues};e.prototype.getAttempts=function(){return this.boardGenerationAttempts};e.prototype.generateBoard=function(c){var a=0;do{var b=this.attemptToGenerateBoard(c);a++}while("boolean"===typeof b);this.boardGenerationAttempts=a;return b};e.prototype.attemptToGenerateBoard=function(c){for(var a=[],b=0;b<c;b++)a.push(Array(c));for(b=0;b<
c;b++){for(var d=[],e=0;e<c;e++)d.push(e);var f=function(c){var e=g.getEmptySpots(a[c]),f=d.filter(function(b){return-1<e.indexOf(b)});if(0===f.length)return{value:!1};f=f[Math.floor(Math.random()*f.length)];a[c][f]=b+1;d.splice(d.indexOf(f),1)},g=this;for(e=0;e<c;e++){var h=f(e);if("object"===typeof h)return h.value}}return a};e.prototype.getEmptySpots=function(c){for(var a=[],b=0;b<c.length;b++)c[b]||a.push(b);return a};e.prototype.generateClues=function(c){for(var a=[],b=0;b<c.length;b++){for(var d=
[],e=0;e<c.length;e++)d.push(c[e][b]);a.push(this.computeVisibleTowers(d))}for(b=0;b<c.length;b++){d=[];for(e=c.length-1;0<=e;e--)d.push(c[b][e]);a.push(this.computeVisibleTowers(d))}for(b=c.length-1;0<=b;b--){d=[];for(e=c.length-1;0<=e;e--)d.push(c[e][b]);a.push(this.computeVisibleTowers(d))}for(b=c.length-1;0<=b;b--)a.push(this.computeVisibleTowers(c[b]));return a};e.prototype.computeVisibleTowers=function(c){for(var a=1,b=c[0],d=1;d<c.length;d++)c[d]>b&&(b=c[d],a++);return a};return e}();f.Board=
g},{}],2:[function(g,h,f){f.__esModule=!0;var e=g("./utility");g=function(){function c(a,b,d){"undefined"===typeof d?this.numCellsX=this.numCellsY=b:(this.numCellsX=b,this.numCellsY=d);this.canvas=a;this.draw=a.getContext("2d")}c.prototype.resize=function(a,b){"undefined"===typeof b?(this.canvas.width=this.canvas.height=a,this.cellWidth=a/this.numCellsX,this.cellHeight=a/this.numCellsY):(this.canvas.width=a,this.canvas.height=b,this.cellWidth=a/this.numCellsX,this.cellHeight=b/this.numCellsY)};c.prototype.drawGrid=
function(a){"undefined"===typeof a&&(a=0);for(var b=a;b<=this.numCellsY-a;b++){var d=this.cellHeight*b;this.draw.beginPath();this.draw.moveTo(a*this.cellWidth,d);this.draw.lineTo(this.canvas.width-a*this.cellWidth,d);this.draw.stroke()}for(b=a;b<=this.numCellsX-a;b++)d=this.cellWidth*b,this.draw.beginPath(),this.draw.moveTo(d,a*this.cellHeight),this.draw.lineTo(d,this.canvas.height-a*this.cellHeight),this.draw.stroke()};c.prototype.clearCanvas=function(){this.draw.clearRect(0,0,this.canvas.width,
this.canvas.height)};c.prototype.getBoardInfo=function(){return{numCellsX:this.numCellsX,numCellsY:this.numCellsY,cellWidth:this.cellWidth,cellHeight:this.cellHeight,canvasWidth:this.canvas.width,canvasHeight:this.canvas.height}};c.prototype.calculateClickCoordinates=function(a){var b=this.canvas.getBoundingClientRect(),d=this.getBoardInfo();return e.convertPixelsToCellCoords(a.clientX-b.left,a.clientY-b.top,d.cellWidth,d.cellHeight)};c.prototype.highlightCell=function(a){var b=e.convertCellCoordsToPixels(a.x,
a.y,this.cellWidth,this.cellHeight);this.draw.beginPath();this.draw.fillStyle=a.color;this.draw.rect(b[0],b[1],this.cellWidth,this.cellHeight);this.draw.fill()};c.prototype.drawText=function(a){if(a.x>this.numCellsX-1||a.y>this.numCellsY-1)console.log("Warning:  You are attempting to place text out of bounds."),console.log("Your input: ("+a.x+", "+a.y+")."),console.log("Maximum value: ("+(this.numCellsX-1)+", "+(this.numCellsY-1)+").");else{var b=this.cellHeight>this.cellWidth?this.cellWidth:this.cellHeight;
b=a.fontSize?a.fontSize:b/2;var d=e.convertCellCoordsToPixels(a.x,a.y,this.cellWidth,this.cellHeight),c=d[0]+this.cellWidth/2.7;d=d[1]+this.cellHeight/1.5;a.xPixelOffset&&(c+=a.xPixelOffset,a.xPixelOffset>this.cellWidth/2&&console.log("Warning:  Your x-pixel offset may cause text to appear in a neighboring cell."));a.yPixelOffset&&(d+=a.yPixelOffset,a.yPixelOffset>this.cellHeight/2&&console.log("Warning:  Your y-pixel offset may cause text to appear in a neighboring cell."));this.draw.font=b+"px "+
(a.font?a.font:"Arial");this.draw.fillStyle=a.color?a.color:"black";this.draw.measureText(a.text).width>this.cellWidth&&console.log("Warning:  The width of the text you are drawing exceeds the cell width.");b>this.cellHeight&&console.log("Warning:  The font size you have chosen is taller than the cell height.");this.draw.fillText(a.text,c,d)}};c.prototype.render=function(a){var b=this;this.clearCanvas();Array.isArray(a.canvasSize)?a.canvasSize[0]===this.canvas.width&&a.canvasSize[1]===this.canvas.height||
this.resize(a.canvasSize[0],a.canvasSize[1]):a.canvasSize===this.canvas.width&&a.canvasSize===this.canvas.height||this.resize(a.canvasSize);this.drawGrid(a.padding);Array.isArray(a.highlight)?a.highlight.forEach(function(a){b.highlightCell(a)}):"object"===typeof a.highlight&&this.highlightCell(a.highlight);if(a.board)if(a.board.length!==this.numCellsY)console.log("Warning:  board size mismatch in Y dimension."),console.log("Expected "+this.numCellsY+" height, but got "+a.board.length+" instead.");
else{for(var d=0;d<a.board.length;d++)if(a.board[d].length!==this.numCellsX){console.log("Warning:  board size mismatch in X dimension.");console.log("Expected "+this.numCellsX+" height, but got "+a.board[d].length+" instead.");return}for(d=0;d<a.board.length;d++)for(var c=0;c<a.board[d].length;c++){var e=a.board[d][c];"undefined"!==typeof e&&this.drawText({x:c,y:d,text:String(e)})}}};return c}();f.CanvasRenderer=g},{"./utility":6}],3:[function(g,h,f){f.__esModule=!0;var e=g("./utility");g=function(){function c(a,
b,d){this.eventListenersAdded=!1;this.model=a;this.view=b;this.canvas=d;this.attachEventHandlers()}c.prototype.attachEventHandlers=function(){var a=this;this.eventListenersAdded||(this.canvas.addEventListener("click",function(b){b=a.view.calculateClickCoordinates(b);a.canvasSize=e.calculateDesiredCanvasSize();a.model.activateCell(b);a.model.showBoard(a.canvasSize)}),window.onkeyup=function(b){(48<=b.keyCode&&57>=b.keyCode||96<=b.keyCode&&105>=b.keyCode)&&a.model.insertGuess(Number(b.key))&&(a.model.activateCell([-1,
-1]),a.model.showBoard(a.canvasSize))},window.onresize=function(){var b=e.calculateDesiredCanvasSize();a.model.showBoard(b)},this.eventListenersAdded=!0)};return c}();f.Controller=g},{"./utility":6}],4:[function(g,h,f){f.__esModule=!0;h=document.getElementById("tower");f=g("./model");var e=g("./canvas-renderer");g=g("./controller");e=new e.CanvasRenderer(h,7);f=new f.Game(e,5);new g.Controller(f,e,h)},{"./canvas-renderer":2,"./controller":3,"./model":5}],5:[function(g,h,f){f.__esModule=!0;var e=g("./Board"),
c=g("./utility");g=function(){function a(b,a){this.activeCell=[-1,-1];this.cluesAndGuesses=[];this.view=b;this.board=new e.Board(a);this.buildGuessAndCluesArray(a+2);this.populateGuessArrayWithClues();this.showBoard(c.calculateDesiredCanvasSize())}a.prototype.activateCell=function(b){c.arrayCompare(this.activeCell,b)?(this.activeCell[0]=-1,this.activeCell[1]=-1):0<b[0]&&b[0]<this.cluesAndGuesses.length-1&&0<b[1]&&b[1]<this.cluesAndGuesses.length-1?(this.activeCell[0]=b[0],this.activeCell[1]=b[1]):
-1===b[0]&&-1===b[1]&&(this.activeCell[0]=-1,this.activeCell[1]=-1)};a.prototype.buildGuessAndCluesArray=function(b){for(var a=this.cluesAndGuesses.length=0;a<b;a++)this.cluesAndGuesses[a]=Array(b)};a.prototype.populateGuessArrayWithClues=function(){for(var b=this.board.getClues(),a=0;a<b.length/4;a++)this.cluesAndGuesses[0][a+1]=b[a],this.cluesAndGuesses[a+1][this.cluesAndGuesses.length-1]=b[b.length/4+a],this.cluesAndGuesses[this.cluesAndGuesses.length-1][this.cluesAndGuesses.length-a-2]=b[b.length/
2+a],this.cluesAndGuesses[this.cluesAndGuesses.length-a-2][0]=b[3*b.length/4+a]};a.prototype.insertGuess=function(a){a=Number(a);if(0>=a||a>this.cluesAndGuesses.length-2)return console.log("Guess value "+a+" is not valid."),!1;if(0<this.activeCell[0]&&this.activeCell[0]<this.cluesAndGuesses.length-1&&0<this.activeCell[1]&&this.activeCell[1]<this.cluesAndGuesses.length-1)return this.cluesAndGuesses[this.activeCell[1]][this.activeCell[0]]=Number(a),!0;console.log("Invalid coordinates:  "+this.activeCell);
return!1};a.prototype.showBoard=function(a){a={padding:1,canvasSize:a,board:this.cluesAndGuesses};-1<this.activeCell[0]&&-1<this.activeCell[1]&&(a.highlight={x:this.activeCell[0],y:this.activeCell[1],color:"LightGray"});this.view.render(a)};return a}();f.Game=g},{"./Board":1,"./utility":6}],6:[function(g,h,f){function e(c,a){if(c.length!==a.length)return!1;for(var b=0;b<c.length;b++)if(Array.isArray(c[b])&&Array.isArray(a[b])){var d=e(c[b],a[b]);if(!d)return d}else if(c[b]!==a[b])return!1;return!0}
f.__esModule=!0;f.convertCellCoordsToPixels=function(c,a,b,d){return[b*c,d*a]};f.convertPixelsToCellCoords=function(c,a,b,d){return[Math.floor(c/b),Math.floor(a/d)]};f.arrayCompare=e;f.calculateDesiredCanvasSize=function(){var c=document.getElementsByTagName("body")[0].clientWidth,a=.98*window.innerHeight-65;return c>a?a:c}},{}]},{},[4]);